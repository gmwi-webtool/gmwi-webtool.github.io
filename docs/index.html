<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta
      property="og:image"
      content="https://raw.githubusercontent.com/danielchang2002/GMWI-webtool/main/build/preview.png"
    />

    <title>GMWI-webtool</title>

    <!-- Bootstrap core CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <!-- popper -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.6.0/umd/popper.min.js" integrity="sha512-BmM0/BQlqh02wuK5Gz9yrbe7VyIVwOzD1o40yi1IsTjriX/NGF37NyXHfmFzIlMmoSIBXgqDiG1VNU6kB5dBbA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    <link rel="stylesheet" href="styles.css" />

    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí©</text></svg>"
    />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/mathjs/lib/browser/math.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js" integrity="sha512-xcHCGC5tQ0SHlRX8Anbz6oy/OullASJkEhb4gjkneVpGE3/QGYejf14CUO5n5q5paiHfRFTa9HKgByxzidw2Bw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> -->
    <script src="html2canvas.min.js"></script>
    <script type="module" src="app.js" defer></script>
  </head>

  <body>
    <!-- start sidebar button -->
    <button
      class="btn"
      type="button"
      data-bs-toggle="offcanvas"
      data-bs-target="#offcanvasScrolling"
      id="sideButton"
      aria-controls="offcanvasScrolling"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="48"
        viewBox="0 0 24 24"
        width="48"
      >
        <path d="M0 0h24v24H0V0z" fill="none" />
        <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
      </svg>
    </button>
    <!-- end sidebar button -->

    <!-- start sidebar -->
    <div
      class="offcanvas offcanvas-start show"
      data-bs-scroll="true"
      data-bs-backdrop="false"
      tabindex="-1"
      id="offcanvasScrolling"
      aria-labelledby="offcanvasScrollingLabel"
    >
      <!-- <div class="offcanvas-header">
      <h5 class="display-6" id="offcanvasScrollingLabel"></h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div> -->
      <button
        type="button"
        class="btn-close text-reset align-self-end"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
      ></button>
      <div class="offcanvas-body">
        <div class="container">
          <!-- start input -->
          <div class="setting">
            <h4><b>Input Data </b></h4>
            <p>
              Please upload or paste your MetaPhlAn2 output file (.txt)

                <!-- tooltip -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16"  data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true" transform="translate(0, -1)" title="The required MetaPhlAn2 output data is the unedited .txt taxonomic profile(s) resulting from running MetaPhlAn2 on metagenome .fastq files(s).">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                  <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                </svg>
            </p>
            <br />
            <input
              class="form-control"
              type="file"
              id="inputFile"
              name="metaphlan2"
            />
            <br />
            <textarea class="form-control" id="inputText" rows="6"></textarea>
            <br />

            <!-- <a href="#!" class="" id="example">Example data</a> -->
            <button type="button" id="example" class="btn btn-outline-primary">
              Example data
            </button>

            <button type="button" id="clear" class="btn btn-outline-danger">
              Clear
            </button>
            <br />
            <br />
            <br />
            <br />

            <div class="" id="sampleDiv">
              <label for="sampleBox">Please select sample
                <!-- tooltip -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16"  data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true" transform="translate(0, -1)" title="If your MetaPhlAn2 output file has multiple samples, please select one sample for analysis.
                ">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                  <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                </svg>
              </label>

              <select id="sampleBox" class="form-select" aria-label="">
                <option value="-1">None</option>
              </select>
              <br />
            </div>
            
            <label for="popBox">Please select health status for analyses

              <!-- tooltip -->
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16"  data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true" transform="translate(0, -1)" title="Please select whether you would like to compare the input sample with healthy samples, nonhealthy samples, or all samples in the pooled gut microbiome dataset. This selection pertains to the first two plots only.">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
              </svg>

            </label>
            <select
              id="popBox"
              class="form-select"
              aria-label="Default select example"
            >
              <option value="all">All</option>
              <option value="healthy">Healthy</option>
              <option value="nonhealthy">Nonhealthy</option>
            </select>
            <br/>

            <button type="button" id="submit" class="btn btn-outline-primary">
              Display results
            </button>
            <button type="button" id="export" class="btn btn-outline-success">
              Export as CSV
            </button>
            <!-- <button type="button" id="exportPlots" class="btn btn-outline-info btn-sm">
              Export Plots
            </button> -->
            <!-- <button type="button" id="clear" class="btn btn-outline-danger btn-sm">
              Clear
            </button> -->
          </div>
          <!-- end input -->
        </div>
      </div>
    </div>
    <!-- end sidebar -->

    <!-- start main stuff -->
    <div class="container" id="main">
      <div class="row justify-content-center">
        <div class="col-sm-7">
          <!-- title -->
          <header class="text-center">
            <br>
            <h1 class="display-6 text-center">
              GMWI-webtool
              <img src="https://img.shields.io/badge/version-beta-blue">
            </h1>
              <!-- <img src="https://img.shields.io/badge/version-beta-blue"> -->
            <br>
                <p>
                  Gut Microbiome Wellness IndexÔ∏è (GMWI) is a biologically-interpretable mathematical formula for predicting the likelihood of disease independent of the clinical diagnosis.
                  GMWI is computed from sets of health-prevalent and health-scarce microbial species, which were determined and validated using a pooled dataset of 5,026 stool shotgun metagenomes from 43 independent studies. 
                  Read the original paper
                  <a href="https://www.nature.com/articles/s41467-020-18476-8" target="_blank">here</a>.
                <br>
                <br>
                  If you use GMWI-webtool, please cite:<br><br>
                  <b>Daniel Chang</b>, Vinod K Gupta, Benjamin Hur, Kevin Y Cunningham, Jaeyun Sung, GMWI-webtool: a user-friendly browser application for assessing health through metagenomic gut microbiome profiling, <i>Bioinformatics</i>, Volume 39, Issue 2, February 2023, btad061, <a href="https://doi.org/10.1093/bioinformatics/btad061" target="_blank">doi.org/10.1093/bioinformatics/btad061</a>
                </p>

            <br>
          </header>

          <div id="histogram" class="fig"></div>
          <div id="bar" class="fig"></div>
          <div id="pca" class="fig"></div>
          <div id="hphm" class="fig"></div>
          <div id="abundant" class="fig"></div>
        </div>
      </div>
    </div>
    <!-- end main stuff -->

    <!-- start footer  -->
    <footer class="footer">
      <div class="container text-center">
          <a
            style="text-decoration: none"
            href="https://github.com/danielchang2002/GMWI-webtool"
            class="bottom-link"
            target="_blank"
            ><svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-github"
              viewBox="0 0 16 16"
            >
              <path
                d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
              />
            </svg>
            source</a
          >
          <br/>
          <br/>
      </div>
    </footer>
    <!-- end footer -->
  </body>
</html>
